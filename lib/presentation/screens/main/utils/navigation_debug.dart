import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:vms_app/presentation/providers/route_provider.dart';
import 'package:vms_app/core/utils/logging/app_logger.dart';
import '../controllers/main_screen_controller.dart';

class NavigationDebugHelper {
  static int _callCount = 0;
  
  static void debugPrint(String message, {String? location}) {
    _callCount++;
    final timestamp = DateTime.now().millisecondsSinceEpoch;
    AppLogger.d('üîç [$_callCount][$timestamp]${location != null ? "[$location]" : ""} $message');
  }
  
  static void checkProviderAccess(BuildContext context, String location) {
    debugPrint('=== Provider Ï≤¥ÌÅ¨ ===', location: location);
    
    // RouteSearchProvider Ï≤¥ÌÅ¨
    try {
      final routeProvider = Provider.of<RouteProvider>(context, listen: false);
      debugPrint('‚úÖ RouteSearchProvider OK - past: ${routeProvider.pastRoutes.length}, pred: ${routeProvider.predRoutes.length}', location: location);
    } catch (e) {
      debugPrint('‚ùå RouteSearchProvider Ïã§Ìå®: $e', location: location);
    }
    
    // MapControllerProvider Ï≤¥ÌÅ¨
    try {
      final mapProvider = Provider.of<MapControllerProvider>(context, listen: false);
      debugPrint('‚úÖ MapControllerProvider OK', location: location);
      debugPrint('MapControllerProvider instance: $mapProvider', location: location);
    } catch (e) {
      debugPrint('‚ùå MapControllerProvider Ïã§Ìå®: $e', location: location);
    }
    
    // MainScreenController Ï≤¥ÌÅ¨
    try {
      final mainController = Provider.of<MainScreenController>(context, listen: false);
      debugPrint('‚úÖ MainScreenController OK', location: location);
      debugPrint('MainScreenController instance: $mainController', location: location);
    } catch (e) {
      debugPrint('‚ùå MainScreenController Ïã§Ìå®: $e', location: location);
    }
  }
}
